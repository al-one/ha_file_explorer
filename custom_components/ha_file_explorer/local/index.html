<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><!--[if IE]><link rel="icon" href="favicon.ico"><![endif]--><title>文件管理 - File Explorer</title><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:100,300,400,500,700,900"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@mdi/font@latest/css/materialdesignicons.min.css"><script src="js/src-min-noconflict/ace.js"></script><link href="css/chunk-011a0d88.a7e8e9ee.css" rel="prefetch"><link href="css/chunk-085b29b4.35de584a.css" rel="prefetch"><link href="css/chunk-0926b993.2bd5512a.css" rel="prefetch"><link href="css/chunk-250706e7.01cf6fd8.css" rel="prefetch"><link href="css/chunk-278e49c7.01cf6fd8.css" rel="prefetch"><link href="css/chunk-27b6f50e.01cf6fd8.css" rel="prefetch"><link href="css/chunk-27c0bf17.01cf6fd8.css" rel="prefetch"><link href="css/chunk-2d976c01.7d887a01.css" rel="prefetch"><link href="css/chunk-39bca854.1c99250f.css" rel="prefetch"><link href="css/chunk-627f6fa1.af95362c.css" rel="prefetch"><link href="css/chunk-64749c83.dca0815b.css" rel="prefetch"><link href="css/chunk-960b2f36.509272a8.css" rel="prefetch"><link href="css/chunk-a586c204.3ffbbc52.css" rel="prefetch"><link href="css/chunk-b9cfc122.4b83cbbc.css" rel="prefetch"><link href="css/chunk-c8816ec8.2373802b.css" rel="prefetch"><link href="js/chunk-011a0d88.7e1780c3.js" rel="prefetch"><link href="js/chunk-085b29b4.9756448d.js" rel="prefetch"><link href="js/chunk-0926b993.303979b7.js" rel="prefetch"><link href="js/chunk-250706e7.fdebd7ba.js" rel="prefetch"><link href="js/chunk-278e49c7.9855fc58.js" rel="prefetch"><link href="js/chunk-27b6f50e.003de327.js" rel="prefetch"><link href="js/chunk-27c0bf17.f2701b15.js" rel="prefetch"><link href="js/chunk-2d0b2007.6cebeaa6.js" rel="prefetch"><link href="js/chunk-2d0ccbf6.963a6ffe.js" rel="prefetch"><link href="js/chunk-2d0daf50.cddf3497.js" rel="prefetch"><link href="js/chunk-2d0e88ff.24b8a472.js" rel="prefetch"><link href="js/chunk-2d2293db.cf2c3b04.js" rel="prefetch"><link href="js/chunk-2d22bd01.3547f99d.js" rel="prefetch"><link href="js/chunk-2d976c01.80378459.js" rel="prefetch"><link href="js/chunk-39bca854.817e1e89.js" rel="prefetch"><link href="js/chunk-627f6fa1.af5404ad.js" rel="prefetch"><link href="js/chunk-64749c83.f077bc5d.js" rel="prefetch"><link href="js/chunk-960b2f36.35eaba53.js" rel="prefetch"><link href="js/chunk-a586c204.cc3a9ca9.js" rel="prefetch"><link href="js/chunk-b9cfc122.a4662bb3.js" rel="prefetch"><link href="js/chunk-c8816ec8.8484a43f.js" rel="prefetch"><link href="css/chunk-vendors.a0b18c09.css" rel="preload" as="style"><link href="js/app.854c4d3d.js" rel="preload" as="script"><link href="js/chunk-vendors.45244b37.js" rel="preload" as="script"><link href="css/chunk-vendors.a0b18c09.css" rel="stylesheet"><link rel="icon" type="image/png" sizes="32x32" href="img/icons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="img/icons/favicon-16x16.png"><link rel="manifest" href="manifest.json"><meta name="theme-color" content="#4DBA87"><meta name="apple-mobile-web-app-capable" content="no"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="apple-mobile-web-app-title" content="ha_file_explorer"><link rel="apple-touch-icon" href="img/icons/apple-touch-icon-152x152.png"><link rel="mask-icon" href="img/icons/safari-pinned-tab.svg" color="#4DBA87"><meta name="msapplication-TileImage" content="img/icons/msapplication-icon-144x144.png"><meta name="msapplication-TileColor" content="#000000"></head><body><noscript><strong>We're sorry but 文件管理 - File Explorer doesn't work properly without JavaScript enabled. Please enable it to continue.</strong></noscript><div id="app"></div><script>class HA {
      constructor() {
        // url参数
        let query = new URLSearchParams(location.search)
        this.query = (key) => {
          let val = query.get(key)
          if (val) {
            return decodeURIComponent(val)
          }
          return val
        }
        this.ver = this.query('ver')
      }

      fullscreen() {
        try {
          let haPanelIframe = top.document.body
            .querySelector("home-assistant")
            .shadowRoot.querySelector("home-assistant-main")
            .shadowRoot.querySelector("app-drawer-layout partial-panel-resolver ha-panel-iframe").shadowRoot
          let ha_card = haPanelIframe.querySelector("iframe");
          ha_card.style.position = 'absolute'
          haPanelIframe.querySelector('app-toolbar').style.display = 'none'
          ha_card.style.top = '0'
          ha_card.style.height = '100%'
        } catch {

        }
      }



      // 触发事件
      fire(type, data, ele = null) {
        console.log(type, data)
        const event = new top.Event(type, {
          bubbles: true,
          cancelable: false,
          composed: true
        });
        event.detail = data;
        if (!ele) {
          ele = top.document.querySelector("home-assistant")
            .shadowRoot.querySelector("home-assistant-main")
            .shadowRoot.querySelector("app-drawer-layout")
        }
        ele.dispatchEvent(event);
      }

      post(params) {
        return this.fetch('/ha_file_explorer-api', params, 'post')
      }

      put(params) {
        return this.fetch('/ha_file_explorer-api', params, 'put')
      }

      // http请求
      async fetch(url, params, method) {
        const body = toString.call(params) == '[object FormData]' ? params : JSON.stringify(params)
        const homeassistant = top.document.querySelector('home-assistant')
        if (!homeassistant) {
          return fetch('http://localhost:8123' + url, {
            method,
            body,
            headers: {
              authorization: 'Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJlMWMxZjZkMGQ1NDA0MjljODVkMTVmNDdhZjJhMDA3OCIsImlhdCI6MTYwOTIyMzc0MywiZXhwIjoxNjA5MjI1NTQzfQ.aL6yYWPjH46ANBVquX90eUKGCyY-esKIpEPQHDZx23I'
            }
          }).then(res => res.json())
        }
        const hass = homeassistant.hass
        return hass.fetchWithAuth(url, {
          method,
          body
        }).then(res => res.json())
      }
    }

    window.ha = new HA();
    window.ha.fullscreen()
    // 百度统计
    var _hmt = _hmt || []; window._hmt = _hmt; (function () { var hm = document.createElement('script'); hm.src = 'https://hm.baidu.com/hm.js?52d57d8b7588a022f89c451d06e311f0'; var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(hm, s) })();</script><script src="js/chunk-vendors.45244b37.js"></script><script src="js/app.854c4d3d.js"></script></body></html>